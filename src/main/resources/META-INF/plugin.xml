<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.yshlll.import_image_tools_plugin</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>Import_image_tools_plugin</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://github.com/your-github-repo">Your Name or Company</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    <h1>图片及资源导入助手</h1>
    <p>简化将图片资产和其他资源导入项目的工作流程。</p>
    
    <h2>核心功能:</h2>
    <ul>
        <li><b>基于规则的导入:</b> 创建自定义规则以独立处理不同的文件类型 (例如 PNG, SVG 等)。</li>
        <li><b>灵活的目标路径:</b> 为每条规则指定独一无二的目标文件夹。</li>
        <li><b>自动识别多倍图:</b> 对位图(png, jpg等)自动处理如 <code>@2x</code> 和 <code>@3x</code> 这样的分辨率后缀，并将它们放入相应的子目录中。</li>
        <li><b>自定义代码生成:</b> 为每条规则定义自己的代码模板，插件将为导入的资产生成变量声明。</li>
        <li><b>代码自动粘贴:</b> 能够自动将生成的代码粘贴到指定文件的指定位置，完全自动化您的工作流程。</li>
        <li><b>高度可配置:</b> 从文件处理规则到代码生成模板的所有方面，都可在设置面板中进行管理。</li>
    </ul>

    <h2>如何使用:</h2>
    <ol>
        <li>前往 <b>工具 (Tools) &rarr; 导入图片 (Import Images)</b> 来打开文件选择器。</li>
        <li>选择您想要导入的文件或文件夹。</li>
        <li>插件将根据您配置的规则处理文件。</li>
        <li>在 <b>设置 (Settings/Preferences) &rarr; 工具 (Tools) &rarr; Import Image Tools</b> 中配置您的导入规则。</li>
    </ol>

    <h3>配置说明:</h3>
    <ul>
        <li>插件将从上到下查找<b>第一个匹配文件后缀</b>的规则来处理导入的文件。</li>
        <li><b>目标文件夹:</b> 相对于项目根目录的路径, 例如: <code>lib/resources/images</code></li>
        <li><b>识别三倍图:</b> 若勾选, 将使用缩放规则映射(Scale Mappings)进行识别 (例如 @2x, @3x)。</li>
        <li><b>代码模板可用占位符:</b>
            <ul>
                <li><code>${VARIABLE_NAME}</code>: 根据文件名生成的变量名 (首字母小写驼峰)。</li>
                <li><code>${RELATIVE_PATH}</code>: 文件导入后相对于项目根目录的完整路径。</li>
                <li><code>${FILE_NAME}</code>: 导入后包含后缀的完整文件名。</li>
            </ul>
        </li>
         <li><b>自动粘贴目标 (可选):</b>
            <ul>
                <li>格式: <code>文件路径::锚点文本::[before|after]</code></li>
                <li><b>文件路径:</b> 必填, 相对于项目根目录, 如 <code>src/R.kt</code></li>
                <li><b>锚点文本:</b> 必填, 文件中用于定位的唯一文本, 如 <code>// ANCHOR</code></li>
                <li><b>粘贴位置:</b> 可选, <code>before</code> 或 <code>after</code>, 默认为 <code>after</code>。</li>
                <li>如果留空, 插件将弹出代码复制窗口。</li>
                <li><b>样例 </b>放在<code>//gif_end</code>的前面: <code>lib/common/medias.dart:://gif_end::before</code></li>
                <li><b>样例 </b>放在<code>class ImageNames {</code>的后面: <code>lib/common/medias.dart::class ImageNames {</code></li>
            </ul>
        </li>
    </ul>
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>

    <actions>
        <action id="com.light.import_image_tools.ImportImageAction"
                class="com.light.import_image_tools.ImportImageAction"
                text="Import Images"
                description="Import images from external folder.">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.light.import_image_tools.settings.AppSettingsState"/>

        <applicationConfigurable
                parentId="tools"
                instance="com.light.import_image_tools.settings.AppSettingsConfigurable"
                id="com.light.import_image_tools.settings.AppSettingsConfigurable"
                displayName="Import Image Tools"/>
    </extensions>
</idea-plugin>